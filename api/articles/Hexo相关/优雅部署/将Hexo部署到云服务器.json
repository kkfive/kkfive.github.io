{"title":"å°†Hexoéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨","slug":"Hexoç›¸å…³/ä¼˜é›…éƒ¨ç½²/å°†Hexoéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨","date":"2020-05-20T12:48:00.000Z","updated":"2022-02-21T06:22:27.456Z","comments":true,"path":"api/articles/Hexoç›¸å…³/ä¼˜é›…éƒ¨ç½²/å°†Hexoéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨.json","excerpt":null,"covers":["https://file.acs.pw/picGo/2021/3/27/de251f0f871c01507f2bc292917bc420.png","https://file.acs.pw/picGo/2021/3/27/b430e2ffaa75db48c34a446f6584fd81.png","https://file.acs.pw/picGo/2021/3/27/0668382e36ef0e687a6f9efe43a0f94e.png","https://file.acs.pw/picGo/2021/3/27/2212cfcdb4de9aeb0ee089d51606f776.png","https://file.acs.pw/picGo/2021/3/27/9bb08f709dcf522cf365e40ea0e0f752.png","https://file.acs.pw/picGo/2021/3/27/fbdfbb86f93020ecdafaa9c8aea359b3.png","https://file.acs.pw/picGo/2021/3/27/1e51ea1f28dddc4157fc362213841d83.png","https://file.acs.pw/picGo/2021/3/27/4da6bec68f9a80a43f161b099ad28a0a.png","https://file.acs.pw/picGo/2021/3/27/abcae5bea72fafd4ed2dad8d1ce0018c.png","https://file.acs.pw/picGo/2021/3/27/411a6b4e96b3aa2732d465a661a9c56a.png","https://file.acs.pw/picGo/2021/3/27/52da95cff516898b457be1e0e654a956.png","https://file.acs.pw/picGo/2021/3/27/7eaf5c19d14602abc4f80fc5562f2c6a.jpeg","https://file.acs.pw/picGo/2021/3/27/9e6de78253717fd1e3cb1ab45c57018a.png","https://file.acs.pw/picGo/2021/2/27/4ee8ed340343e6d5b82db27657dfd308.png","https://file.acs.pw/picGo/2021/3/27/81643eaef96277bc6dd3c7a8e30d8759.png","https://file.acs.pw/picGo/2021/3/27/b55191d7d90e5a3f66595e86223a30e2.png","https://file.acs.pw/picGo/2021/3/27/0d3b13695dc9c3c9fcb638836236a837.png","https://file.acs.pw/picGo/2021/3/27/58d4ac2252bf2890ec848e045e086bd7.png","https://file.acs.pw/picGo/2021/3/27/23cb64080f8891b59c570d455be9ade2.png","https://file.acs.pw/pigGo/2021/03/27/20210327114033.png","https://file.acs.pw/pigGo/2021/03/27/20210327145311.png"],"content":"<h2 id=\"å‰è¨€\"><a class=\"markdownIt-Anchor\" href=\"#å‰è¨€\"></a> å‰è¨€</h2>\n<blockquote>\n<p>2021å¹´03æœˆ27æ—¥é‡æ–°æ›´æ–°æ­¤ç¯‡æ–‡ç« ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œå¤§æ¦‚å› ä¸ºæ˜¨å¤©æ™šä¸Švercelç½‘ç»œå‡ºç°äº†æ³¢åŠ¨ï¼Œå¯¼è‡´æˆ‘çš„cdnæ— æ³•è¿›è¡Œå›æºï¼Œæœ€ç»ˆå¯¼è‡´åšå®¢æ‰“ä¸å¼€ã€‚å› æ­¤å†³å®šå°†åšå®¢åŒæ—¶éƒ¨ç½²åˆ°æœåŠ¡å™¨åšcdnçš„å›æºé€”å¾„ã€‚<em>å¤šä¸€ä»½éƒ¨ç½²å¤šä¸€ä»½ä¿éšœ</em>ğŸ¤­</p>\n</blockquote>\n<h2 id=\"å¿«é€Ÿå¼€å§‹\"><a class=\"markdownIt-Anchor\" href=\"#å¿«é€Ÿå¼€å§‹\"></a> å¿«é€Ÿå¼€å§‹</h2>\n<blockquote>\n<p><strong>å…¨ç¨‹å›¾æ–‡é¢„è­¦</strong></p>\n<p>ä¸Šä¸€æ¬¡éƒ¨ç½²ä½¿ç”¨çš„æ–¹å¼æ˜¯å®¿ä¸»æœºå®‰è£…nginxå¼€å¯é™æ€æœåŠ¡å™¨çš„æ–¹å¼ï¼Œè¿™æ¬¡ä¸ºäº†æ–¹ä¾¿ï¼Œå†³å®šä½¿ç”¨<code>docker</code>+<code>docker-compose</code>çš„æ–¹å¼è¿›è¡Œå®‰è£…nginxã€‚</p>\n</blockquote>\n<div class=\"note warning flat\"><p>æœ¬æ¬¡æ•™ç¨‹ä½¿ç”¨çš„æœåŠ¡å™¨ç¯å¢ƒä¸º<strong>é˜¿é‡Œè½»é‡äº‘+CentOS 7.6</strong></p>\n</div>\n<h2 id=\"å®‰è£…gitå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…gitå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…\"></a> å®‰è£…gitï¼ˆå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…ï¼‰</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel -y\nyum <span class=\"token function\">install</span> -y <span class=\"token function\">git</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>å®‰è£…å®Œæˆåé€šè¿‡<code>git --version</code>å‘½ä»¤å³å¯æŸ¥çœ‹gitå½“å‰ç‰ˆæœ¬ï¼Œå³ä»£è¡¨æˆåŠŸã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/de251f0f871c01507f2bc292917bc420.png\" alt=\"image-20210327101301179\" /></p>\n<h2 id=\"åˆ›å»ºè£¸éœ²ä»“åº“\"><a class=\"markdownIt-Anchor\" href=\"#åˆ›å»ºè£¸éœ²ä»“åº“\"></a> åˆ›å»ºè£¸éœ²ä»“åº“</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// åˆ›å»ºç”¨æˆ·\n<span class=\"token function\">useradd</span> <span class=\"token function\">git</span>\n\n// è®¾ç½®å¯†ç \n<span class=\"token function\">passwd</span> <span class=\"token function\">git</span> \n\n// åˆ‡æ¢ç”¨æˆ·\n<span class=\"token function\">su</span> <span class=\"token function\">git</span> \n\n// è¿›å…¥gitç”¨æˆ·çš„å®¶ç›®å½•\n<span class=\"token builtin class-name\">cd</span> /home/git/\n\n// é¡¹ç›®å­˜åœ¨çš„çœŸå®ç›®å½•ï¼ˆå½“ç„¶ä½ å¯ä»¥åˆ›å»ºåœ¨å…¶ä»–åœ°æ–¹ï¼‰\n<span class=\"token function\">mkdir</span> -p projects/hexo_blog \n\n// åˆ›å»ºæ–‡ä»¶å¤¹\n<span class=\"token function\">mkdir</span> repos <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> repos\n\n// åˆ›å»ºä¸€ä¸ªè£¸éœ²çš„ä»“åº“\n<span class=\"token function\">git</span> init --bare hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/b430e2ffaa75db48c34a446f6584fd81.png\" alt=\"image-20210327101624787\" /></p>\n<h2 id=\"å†™å…¥é’©å­\"><a class=\"markdownIt-Anchor\" href=\"#å†™å…¥é’©å­\"></a> å†™å…¥é’©å­</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> hexo_blog.git/hooks\n// åˆ›å»º hook é’©å­å‡½æ•°ï¼Œè¾“å…¥äº†å†…å®¹å¦‚ä¸‹\n<span class=\"token function\">vi</span> post-receive <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>è¾“å…¥ä»¥ä¸‹çš„å‘½ä»¤</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">#!&#x2F;bin&#x2F;sh\ngit --work-tree&#x3D;&#x2F;home&#x2F;git&#x2F;projects&#x2F;hexo_blog --git-dir&#x3D;&#x2F;home&#x2F;git&#x2F;repos&#x2F;hexo_blog.git checkout -f<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>å†™å…¥åæ·»åŠ å¯æ‰§è¡Œæƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// ä¸ºåˆšæ‰çš„æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œçš„æƒé™\n<span class=\"token function\">chmod</span> +x post-receive\n// é€€å‡ºåˆ° root ç™»å½•\n<span class=\"token builtin class-name\">exit</span> \n// æ·»åŠ æƒé™\n<span class=\"token function\">chown</span> -R git:git /home/git/repos/hexo_blog.git <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"æµ‹è¯•èƒ½å¦æ­£å¸¸clone\"><a class=\"markdownIt-Anchor\" href=\"#æµ‹è¯•èƒ½å¦æ­£å¸¸clone\"></a> æµ‹è¯•èƒ½å¦æ­£å¸¸clone</h2>\n<p>åœ¨è‡ªå·±ç”µè„‘ä¸Šæ‰¾ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone git@server_ip:/home/git/repos/hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/0668382e36ef0e687a6f9efe43a0f94e.png\" alt=\"image-20210327102246035\" /></p>\n<p>æ­£å¸¸æƒ…å†µä¸‹ä¼šå‡ºç°ä¸Šå›¾çš„æƒ…å†µï¼Œå³ä»£è¡¨æˆåŠŸäº†ã€‚</p>\n<h2 id=\"å»ºç«‹sshå…³ç³»å®ç°å…å¯†\"><a class=\"markdownIt-Anchor\" href=\"#å»ºç«‹sshå…³ç³»å®ç°å…å¯†\"></a> å»ºç«‹SSHå…³ç³»ï¼Œå®ç°å…å¯†</h2>\n<ol>\n<li>\n<p>æ–°å»ºä¸€ä¸ªsshè¯ä¹¦ï¼Œä¸“é—¨ç”¨äºgitæ¨é€ä½¿ç”¨ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä½ çš„id_rsaï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼‰</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssh-keygen -t rsa -C <span class=\"token string\">\"è¿™é‡Œæ¢ä¸Šä½ çš„é‚®ç®±\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<blockquote>\n<p>æŒ‰æç¤ºæ“ä½œå³å¯ã€‚æ³¨æ„å¦‚æœä½ æ›¾ç»æœ‰è¯ä¹¦ï¼Œè®°å¾—é‡å‘½åï¼Œä¸ç„¶ä¼šè¦†ç›–ä½ ä»¥å‰çš„è¯ä¹¦ã€‚</p>\n</blockquote>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/2212cfcdb4de9aeb0ee089d51606f776.png\" alt=\"image-20210327102824405\" /></p>\n</li>\n<li>\n<p>æ‰‹åŠ¨è®¾ç½®</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// åˆ‡æ¢åˆ°gitç”¨æˆ·\n<span class=\"token function\">su</span> <span class=\"token function\">git</span>\n//è¿›å…¥å®¶ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰.sshç›®å½•ï¼Œé‚£ä¹ˆéœ€è¦åˆ›å»ºã€‚å¦‚æœå­˜åœ¨ç›´æ¥è¿›å…¥å³å¯\n<span class=\"token builtin class-name\">cd</span> ~\n//åˆ›å»º.sshç›®å½•\n<span class=\"token function\">mkdir</span> .ssh\n// èµ‹äºˆæƒé™\n<span class=\"token function\">chmod</span> <span class=\"token number\">700</span> .ssh/\n// è¿›å…¥.sshç›®å½•\n<span class=\"token builtin class-name\">cd</span> .ssh\n// ç¼–è¾‘ä¸€ä¸ªåä¸ºauthorized_keysçš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥å…¬é’¥<span class=\"token punctuation\">(</span>git_rsa.pub<span class=\"token punctuation\">)</span>å†…å®¹\n<span class=\"token function\">vi</span> authorized_keys\n// æ·»åŠ å®Œæˆåèµ‹äºˆæƒé™\n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> authorized_keys<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/9bb08f709dcf522cf365e40ea0e0f752.png\" alt=\"image-20210327103047351\" /></p>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<p>å¦‚æœä½ ç”Ÿæˆçš„è¯ä¹¦æ²¡æœ‰æŒ‰ç…§é»˜è®¤æµç¨‹ï¼ˆå›¾ç‰‡ç¤ºä¾‹ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦ä½ å°†ä½ çš„è¯ä¹¦ç§»åŠ¨åˆ°<code>C:\\Users\\dream\\.ssh</code>ç›®å½•ï¼Œç„¶ååœ¨<code>config</code>æ–‡ä»¶æ–°å¢å¦‚ä¸‹ï¼š</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># æœåŠ¡å™¨è®¤è¯\nHost ä½ çš„æœåŠ¡ip\n    HostName ä½ çš„æœåŠ¡ip\n    IdentityFile ~\\\\.ssh\\\\ç§é’¥åç§°<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/fbdfbb86f93020ecdafaa9c8aea359b3.png\" alt=\"image-20210327103710656\" /></p>\n<blockquote>\n<p>å¦‚æœä½ æŒ‰ç…§é»˜è®¤æµç¨‹äº†ï¼Œé‚£ä¹ˆä¸éœ€è¦æ­¤æ“ä½œã€‚</p>\n</blockquote>\n<p>éƒ½é…ç½®å®Œæ¯•åè¾“å…¥<code>ssh git@æœåŠ¡å™¨ip</code>å¦‚æœèƒ½å¤Ÿå…å¯†ç™»å½•å³ä»£è¡¨æˆåŠŸäº†ï¼Œå¦‚æœä¸èƒ½è¯·ç”¨è„‘å­åœ¨ä»”ç»†çœ‹ä¸€éè¿™ä¸€éƒ¨åˆ†çš„æ•™ç¨‹ã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/1e51ea1f28dddc4157fc362213841d83.png\" alt=\"image-20210327103901579\" /></p>\n</li>\n</ol>\n<h2 id=\"ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™\"><a class=\"markdownIt-Anchor\" href=\"#ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™\"></a> ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™</h2>\n<p>æˆ‘æµ‹è¯•å®‰è£…å®Œåè‡ªå¸¦äº†<code>git-shell</code>ï¼Œé€šè¿‡<code>which git-shell</code>å‘½ä»¤æŸ¥çœ‹æ˜¯å¦èƒ½æ˜¾ç¤ºå‡ºè·¯å¾„ï¼Œå¦‚æœä¸èƒ½åˆ™éœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/4da6bec68f9a80a43f161b099ad28a0a.png\" alt=\"image-20210327104350613\" /></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// å¦‚æœä¸æ˜¯rootç”¨æˆ·è¯·åˆ‡æ¢è‡³rootç”¨æˆ·\n<span class=\"token function\">su</span> root\n// æŸ¥çœ‹ git-shell æ˜¯å¦åœ¨ç™»å½•æ–¹å¼é‡Œé¢\n<span class=\"token function\">cat</span> /etc/shells \n// æŸ¥çœ‹æ˜¯å¦å®‰è£…\n<span class=\"token function\">which</span> git-shell \n// æ·»åŠ ä¸Š2æ­¥æ˜¾ç¤ºå‡ºæ¥çš„è·¯åŠ²ï¼Œé€šå¸¸åœ¨ /usr/bin/git-shell<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä¿®æ”¹ <code>/etc/passwd</code> ä¸­çš„æƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/passwd<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// å°†åŸæ¥çš„\ngit:x:1001:1001::/home/git:/bin/bash\n\n// ä¿®æ”¹ä¸º\ngit:x:1001:1001::/home/git:/bin/git-shell<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"hexoé…ç½®\"><a class=\"markdownIt-Anchor\" href=\"#hexoé…ç½®\"></a> hexoé…ç½®</h2>\n<p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ ä¸Šä½ çš„gitï¼Œ<em>æ¯ä¸ªäººçš„é…ç½®å¯èƒ½ä¸åŒ</em>ï¼Œå›¾ç‰‡ä»…ä¾›å‚è€ƒã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/abcae5bea72fafd4ed2dad8d1ce0018c.png\" alt=\"image-20210327104911059\" /></p>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">deploy:\n  - type: baidu_url_submitter <span class=\"token comment\"># ç™¾åº¦</span>\n  - type: baidu_xz_url_submitter <span class=\"token comment\"># ç™¾åº¦ç†ŠæŒå·</span>\n  - type: <span class=\"token function\">git</span>\n    repository:\n      server: git@server_ip:/home/git/repos/hexo_blog.git\n    branch: master<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é…ç½®å®Œæˆåè¿è¡Œä¸€æ¬¡<code>hexo d</code>å‘½ä»¤ï¼Œçœ‹æ˜¯å¦èƒ½æˆåŠŸæ¨é€ã€‚ï¼ˆä½¿ç”¨æ­¤å‘½ä»¤æ¨é€éœ€è¦æœ¬åœ°id_rsaç§é’¥å¯¹ç”¨çš„å…¬é’¥åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœä½ æŒ‰ç…§æˆ‘çš„æµç¨‹é‡å‘½åäº†ï¼Œé‚£ä¹ˆä¸ä¼šæˆåŠŸçš„ï¼ï¼‰</p>\n<p>æ‰‹åŠ¨æµ‹è¯•</p>\n<ol>\n<li>\n<p>è¿›å…¥<code>public</code>ç›®å½•</p>\n</li>\n<li>\n<p>åˆå§‹åŒ–ä»“åº“</p>\n</li>\n<li>\n<p>å‘½ä»¤ä¸‰è¿</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">'update'</span>\n<span class=\"token function\">git</span> push --force --all git@server_ip:/home/git/repos/hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/411a6b4e96b3aa2732d465a661a9c56a.png\" alt=\"image-20210327105822053\" /></p>\n</li>\n<li>\n<p>æ­¤æ—¶æœåŠ¡å™¨ä¸­å·²ç»å­˜åœ¨äº†æ–‡ä»¶</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/52da95cff516898b457be1e0e654a956.png\" alt=\"image-20210327110317070\" /></p>\n</li>\n</ol>\n<div class=\"note danger flat\"><p>è™½ç„¶ç°åœ¨å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯åé¢æˆ‘ä¼šä»‹ç»é€šè¿‡æŒç»­é›†æˆå®ç°è‡ªåŠ¨åŒ–æ„å»ºå¹¶ä¸Šä¼ ã€‚é‚£æ—¶ä½ åªéœ€è¦pushä¸Šä½ çš„æºä»£ç å³å¯ã€‚</p>\n</div>\n<h2 id=\"å®‰è£…docker\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…docker\"></a> å®‰è£…Docker</h2>\n<ol>\n<li>\n<p>å®‰è£…docker</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -fsSL get.docker.com -o get-docker.sh\n<span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> get-docker.sh --mirror Aliyun<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/7eaf5c19d14602abc4f80fc5562f2c6a.jpeg\" alt=\"image-20210327095433092\" /></p>\n</li>\n<li>\n<p>å¯åŠ¨dockeræœåŠ¡</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> docker\n<span class=\"token function\">sudo</span> systemctl start docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>æ¨èæ“ä½œ</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> docker\n<span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG docker <span class=\"token environment constant\">$USER</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/9e6de78253717fd1e3cb1ab45c57018a.png\" alt=\"image-20210327095647687\" /></p>\n</li>\n<li>\n<p>ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼ˆéå¤§é™†æœºå™¨å¯å¿½ç•¥ï¼‰</p>\n<ol>\n<li>\n<p>ç™»å½•<a href=\"https://cr.console.aliyun.com/?spm=5176.12818093.custom--ali--widget-home-product-recent.dre1.1c8316d0Tujp2R\">é˜¿é‡Œå®¹å™¨é•œåƒæœåŠ¡</a></p>\n</li>\n<li>\n<p>æŸ¥çœ‹åŠ é€Ÿåœ°å€</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/2/27/4ee8ed340343e6d5b82db27657dfd308.png\" alt=\"image-20210227190110321\" /></p>\n</li>\n<li>\n<p>è®¾ç½®åŠ é€ŸæœåŠ¡</p>\n<ul>\n<li>\n<p>åˆ›å»ºç›®å½•</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p /etc/docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>\n<p>åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/docker/daemon.json <span class=\"token operator\">&lt;&lt;-</span><span class=\"token string\">'EOF'\n&#123;\n  \"registry-mirrors\": [\"https://lz2nib3q.mirror.aliyuncs.com\"]\n&#125;\nEOF</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>é‡æ–°åŠ è½½åŠé‡å¯DockeræœåŠ¡</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl daemon-reload\n<span class=\"token function\">sudo</span> systemctl restart docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>æŸ¥çœ‹é•œåƒåœ°å€</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">dokcer info<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/81643eaef96277bc6dd3c7a8e30d8759.png\" alt=\"image-20210327100102166\" /></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"å®‰è£…docker-compose\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…docker-compose\"></a> å®‰è£…docker-compose</h2>\n<p>ç”±äºå›½å†…æœºå™¨ç›´æ¥ä¸‹è½½GitHubçš„èµ„æºé€Ÿåº¦å¾ˆæ…¢ã€‚å› æ­¤ä½¿ç”¨æ‰‹åŠ¨ä¸‹è½½çš„æ–¹å¼ã€‚</p>\n<ol>\n<li>\n<p>è¿›å…¥<a href=\"https://github.com/docker/compose/releases\">GitHub</a>è¿›è¡Œä¸‹è½½<code>docker-compose-Linux-x86_64</code></p>\n</li>\n<li>\n<p>å°†æ–‡ä»¶ä¸Šä¼ åˆ° <code>/usr/local/bin/</code> ç›®å½•ï¼Œå¹¶æ”¹åä¸º <code>docker-compose</code></p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/b55191d7d90e5a3f66595e86223a30e2.png\" alt=\"image-20210327100914341\" /></p>\n</li>\n<li>\n<p>èµ‹äºˆæƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">docker-compose -v<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/0d3b13695dc9c3c9fcb638836236a837.png\" alt=\"image-20210327100958402\" /></p>\n</li>\n</ol>\n<h2 id=\"é…ç½®nginx\"><a class=\"markdownIt-Anchor\" href=\"#é…ç½®nginx\"></a> é…ç½®nginx</h2>\n<p>æ—¢ç„¶æˆ‘ä»¬å®‰è£…äº†dockerï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é…ç½®å°†ä¼šå¾ˆç®€å•ã€‚</p>\n<ol>\n<li>\n<p>ä¸‹è½½<a href=\"https://tzk.lanzous.com/b06mr4hfc\">è“å¥äº‘</a>æ–‡ä»¶ï¼Œå¯†ç ï¼ˆak1mï¼‰</p>\n</li>\n<li>\n<p>å°†æ–‡ä»¶è§£å‹ï¼Œå¹¶æŒ‰ç…§ä½ è‡ªå·±çš„ä¿¡æ¯è¿›è¡Œç¼–è¾‘</p>\n<ul>\n<li>\n<p>sslç›®å½•</p>\n<p>å­˜æ”¾ä½ çš„ç½‘ç«™è¯ä¹¦ï¼Œå¯ä»¥åˆ°è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€freesslç­‰å¹³å°è¿›è¡Œç”³è¯·ã€‚</p>\n</li>\n<li>\n<p>nginxç›®å½•</p>\n<p>æ­¤ç›®å½•å­˜åœ¨nginxçš„ç›¸å…³é…ç½®ï¼Œè¯·æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ç›¸å…³é…ç½®</p>\n</li>\n</ul>\n</li>\n<li>\n<p>æœåŠ¡å™¨ä¸Šä¼ è¿™äº›æ–‡ä»¶ï¼ˆä¸æ˜¯å‹ç¼©åŒ…ï¼‰</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~\n<span class=\"token function\">mkdir</span> blog<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/58d4ac2252bf2890ec848e045e086bd7.png\" alt=\"image-20210327113346229\" /></p>\n</li>\n<li>\n<p>è¿è¡Œ<code>docker-compose up -d</code>å‘½ä»¤å¯åŠ¨æœåŠ¡ã€‚ç„¶åä½¿ç”¨<code>docker-compose ps</code>å‘½ä»¤æŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/23cb64080f8891b59c570d455be9ade2.png\" alt=\"image-20210327113622914\" /></p>\n</li>\n<li>\n<p>dnsè§£æã€‚</p>\n<p><img src=\"https://file.acs.pw/pigGo/2021/03/27/20210327114033.png\" alt=\"image-20210327113645222\" /></p>\n</li>\n</ol>\n<h2 id=\"é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²\"></a> é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²</h2>\n<p>é€šè¿‡codingéƒ¨ç½²éœ€è¦å°†æˆ‘ä»¬çš„ç§é’¥æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œï¼Œä½†æ˜¯codingçš„ç¯å¢ƒå˜é‡ä¸ä¼šè‡ªåŠ¨è§£ææ¢è¡Œç¬¦ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è§£æä¸€ä¸‹ï¼ˆä¹Ÿå°±æ˜¯å°†æ¢è¡Œå˜æˆ<code>\\n</code>ï¼‰ã€‚ç„¶åå°†å…¶å¡«å…¥codingçš„ç¯å¢ƒå˜é‡ã€‚</p>\n<p>ç®€é™‹çš„åœ¨çº¿è½¬æ¢åœ°å€ï¼š<a href=\"https://kkfive.gitee.io/tools/\">gitee Pages</a></p>\n<p><img src=\"https://file.acs.pw/pigGo/2021/03/27/20210327145311.png\" alt=\"image-20210327145311021\" /></p>\n<p>åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤ä¹‹å‰æ·»åŠ å¦‚ä¸‹å‘½ä»¤å³å¯ã€‚</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p ~/.ssh/\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$&#123;HEXO_DEPLOY_PRIVATE_KEY&#125;</span>\"</span> <span class=\"token operator\">></span> ~/.ssh/id_rsa \n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> ~/.ssh/id_rsa\n<span class=\"token function\">cat</span> ~/.ssh/id_rsa\nssh-keyscan ä½ çš„æœåŠ¡å™¨ipåœ°å€ <span class=\"token operator\">>></span> ~/.ssh/known_hosts<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"é€šè¿‡github-actionsè‡ªåŠ¨éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡github-actionsè‡ªåŠ¨éƒ¨ç½²\"></a> é€šè¿‡GitHub Actionsè‡ªåŠ¨éƒ¨ç½²</h2>\n<p>GitHubçš„å¯†é’¥æ”¯æŒæ¢è¡Œç¬¦ï¼Œä¸éœ€è¦è¿›è¡Œè½¬åŒ–ï¼Œç›´æ¥ç²˜è´´å³å¯ã€‚æ–°åŠ ä¸€ä¸ªåç§°ä¸º <code>HEXO_DEPLOY_PRIVATE_KEY</code>çš„<code>Secrets</code></p>\n<p>åœ¨è¿›è¡Œä¸Šä¼ æ“ä½œæ—¶æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Deploy Private Key\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">HEXO_DEPLOY_PRIVATE_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#123;</span> secrets.HEXO_DEPLOY_PRIVATE_KEY <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span>\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    mkdir -p ~/.ssh/\n    echo \"$HEXO_DEPLOY_PRIVATE_KEY\" > ~/.ssh/id_rsa \n    chmod 600 ~/.ssh/id_rsa\n    ssh-keyscan æœåŠ¡å™¨ip >> ~/.ssh/known_hosts</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","more":"<h2 id=\"å‰è¨€\"><a class=\"markdownIt-Anchor\" href=\"#å‰è¨€\"></a> å‰è¨€</h2>\n<blockquote>\n<p>2021å¹´03æœˆ27æ—¥é‡æ–°æ›´æ–°æ­¤ç¯‡æ–‡ç« ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œå¤§æ¦‚å› ä¸ºæ˜¨å¤©æ™šä¸Švercelç½‘ç»œå‡ºç°äº†æ³¢åŠ¨ï¼Œå¯¼è‡´æˆ‘çš„cdnæ— æ³•è¿›è¡Œå›æºï¼Œæœ€ç»ˆå¯¼è‡´åšå®¢æ‰“ä¸å¼€ã€‚å› æ­¤å†³å®šå°†åšå®¢åŒæ—¶éƒ¨ç½²åˆ°æœåŠ¡å™¨åšcdnçš„å›æºé€”å¾„ã€‚<em>å¤šä¸€ä»½éƒ¨ç½²å¤šä¸€ä»½ä¿éšœ</em>ğŸ¤­</p>\n</blockquote>\n<h2 id=\"å¿«é€Ÿå¼€å§‹\"><a class=\"markdownIt-Anchor\" href=\"#å¿«é€Ÿå¼€å§‹\"></a> å¿«é€Ÿå¼€å§‹</h2>\n<blockquote>\n<p><strong>å…¨ç¨‹å›¾æ–‡é¢„è­¦</strong></p>\n<p>ä¸Šä¸€æ¬¡éƒ¨ç½²ä½¿ç”¨çš„æ–¹å¼æ˜¯å®¿ä¸»æœºå®‰è£…nginxå¼€å¯é™æ€æœåŠ¡å™¨çš„æ–¹å¼ï¼Œè¿™æ¬¡ä¸ºäº†æ–¹ä¾¿ï¼Œå†³å®šä½¿ç”¨<code>docker</code>+<code>docker-compose</code>çš„æ–¹å¼è¿›è¡Œå®‰è£…nginxã€‚</p>\n</blockquote>\n<div class=\"note warning flat\"><p>æœ¬æ¬¡æ•™ç¨‹ä½¿ç”¨çš„æœåŠ¡å™¨ç¯å¢ƒä¸º<strong>é˜¿é‡Œè½»é‡äº‘+CentOS 7.6</strong></p>\n</div>\n<h2 id=\"å®‰è£…gitå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…gitå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…\"></a> å®‰è£…gitï¼ˆå¦‚æœæœ‰åˆ™ä¸éœ€è¦å®‰è£…ï¼‰</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel -y\nyum <span class=\"token function\">install</span> -y <span class=\"token function\">git</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>å®‰è£…å®Œæˆåé€šè¿‡<code>git --version</code>å‘½ä»¤å³å¯æŸ¥çœ‹gitå½“å‰ç‰ˆæœ¬ï¼Œå³ä»£è¡¨æˆåŠŸã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/de251f0f871c01507f2bc292917bc420.png\" alt=\"image-20210327101301179\" /></p>\n<h2 id=\"åˆ›å»ºè£¸éœ²ä»“åº“\"><a class=\"markdownIt-Anchor\" href=\"#åˆ›å»ºè£¸éœ²ä»“åº“\"></a> åˆ›å»ºè£¸éœ²ä»“åº“</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// åˆ›å»ºç”¨æˆ·\n<span class=\"token function\">useradd</span> <span class=\"token function\">git</span>\n\n// è®¾ç½®å¯†ç \n<span class=\"token function\">passwd</span> <span class=\"token function\">git</span> \n\n// åˆ‡æ¢ç”¨æˆ·\n<span class=\"token function\">su</span> <span class=\"token function\">git</span> \n\n// è¿›å…¥gitç”¨æˆ·çš„å®¶ç›®å½•\n<span class=\"token builtin class-name\">cd</span> /home/git/\n\n// é¡¹ç›®å­˜åœ¨çš„çœŸå®ç›®å½•ï¼ˆå½“ç„¶ä½ å¯ä»¥åˆ›å»ºåœ¨å…¶ä»–åœ°æ–¹ï¼‰\n<span class=\"token function\">mkdir</span> -p projects/hexo_blog \n\n// åˆ›å»ºæ–‡ä»¶å¤¹\n<span class=\"token function\">mkdir</span> repos <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> repos\n\n// åˆ›å»ºä¸€ä¸ªè£¸éœ²çš„ä»“åº“\n<span class=\"token function\">git</span> init --bare hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/b430e2ffaa75db48c34a446f6584fd81.png\" alt=\"image-20210327101624787\" /></p>\n<h2 id=\"å†™å…¥é’©å­\"><a class=\"markdownIt-Anchor\" href=\"#å†™å…¥é’©å­\"></a> å†™å…¥é’©å­</h2>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> hexo_blog.git/hooks\n// åˆ›å»º hook é’©å­å‡½æ•°ï¼Œè¾“å…¥äº†å†…å®¹å¦‚ä¸‹\n<span class=\"token function\">vi</span> post-receive <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>è¾“å…¥ä»¥ä¸‹çš„å‘½ä»¤</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">#!&#x2F;bin&#x2F;sh\ngit --work-tree&#x3D;&#x2F;home&#x2F;git&#x2F;projects&#x2F;hexo_blog --git-dir&#x3D;&#x2F;home&#x2F;git&#x2F;repos&#x2F;hexo_blog.git checkout -f<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>å†™å…¥åæ·»åŠ å¯æ‰§è¡Œæƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// ä¸ºåˆšæ‰çš„æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œçš„æƒé™\n<span class=\"token function\">chmod</span> +x post-receive\n// é€€å‡ºåˆ° root ç™»å½•\n<span class=\"token builtin class-name\">exit</span> \n// æ·»åŠ æƒé™\n<span class=\"token function\">chown</span> -R git:git /home/git/repos/hexo_blog.git <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"æµ‹è¯•èƒ½å¦æ­£å¸¸clone\"><a class=\"markdownIt-Anchor\" href=\"#æµ‹è¯•èƒ½å¦æ­£å¸¸clone\"></a> æµ‹è¯•èƒ½å¦æ­£å¸¸clone</h2>\n<p>åœ¨è‡ªå·±ç”µè„‘ä¸Šæ‰¾ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone git@server_ip:/home/git/repos/hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/0668382e36ef0e687a6f9efe43a0f94e.png\" alt=\"image-20210327102246035\" /></p>\n<p>æ­£å¸¸æƒ…å†µä¸‹ä¼šå‡ºç°ä¸Šå›¾çš„æƒ…å†µï¼Œå³ä»£è¡¨æˆåŠŸäº†ã€‚</p>\n<h2 id=\"å»ºç«‹sshå…³ç³»å®ç°å…å¯†\"><a class=\"markdownIt-Anchor\" href=\"#å»ºç«‹sshå…³ç³»å®ç°å…å¯†\"></a> å»ºç«‹SSHå…³ç³»ï¼Œå®ç°å…å¯†</h2>\n<ol>\n<li>\n<p>æ–°å»ºä¸€ä¸ªsshè¯ä¹¦ï¼Œä¸“é—¨ç”¨äºgitæ¨é€ä½¿ç”¨ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä½ çš„id_rsaï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼‰</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssh-keygen -t rsa -C <span class=\"token string\">\"è¿™é‡Œæ¢ä¸Šä½ çš„é‚®ç®±\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<blockquote>\n<p>æŒ‰æç¤ºæ“ä½œå³å¯ã€‚æ³¨æ„å¦‚æœä½ æ›¾ç»æœ‰è¯ä¹¦ï¼Œè®°å¾—é‡å‘½åï¼Œä¸ç„¶ä¼šè¦†ç›–ä½ ä»¥å‰çš„è¯ä¹¦ã€‚</p>\n</blockquote>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/2212cfcdb4de9aeb0ee089d51606f776.png\" alt=\"image-20210327102824405\" /></p>\n</li>\n<li>\n<p>æ‰‹åŠ¨è®¾ç½®</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// åˆ‡æ¢åˆ°gitç”¨æˆ·\n<span class=\"token function\">su</span> <span class=\"token function\">git</span>\n//è¿›å…¥å®¶ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰.sshç›®å½•ï¼Œé‚£ä¹ˆéœ€è¦åˆ›å»ºã€‚å¦‚æœå­˜åœ¨ç›´æ¥è¿›å…¥å³å¯\n<span class=\"token builtin class-name\">cd</span> ~\n//åˆ›å»º.sshç›®å½•\n<span class=\"token function\">mkdir</span> .ssh\n// èµ‹äºˆæƒé™\n<span class=\"token function\">chmod</span> <span class=\"token number\">700</span> .ssh/\n// è¿›å…¥.sshç›®å½•\n<span class=\"token builtin class-name\">cd</span> .ssh\n// ç¼–è¾‘ä¸€ä¸ªåä¸ºauthorized_keysçš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥å…¬é’¥<span class=\"token punctuation\">(</span>git_rsa.pub<span class=\"token punctuation\">)</span>å†…å®¹\n<span class=\"token function\">vi</span> authorized_keys\n// æ·»åŠ å®Œæˆåèµ‹äºˆæƒé™\n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> authorized_keys<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/9bb08f709dcf522cf365e40ea0e0f752.png\" alt=\"image-20210327103047351\" /></p>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<p>å¦‚æœä½ ç”Ÿæˆçš„è¯ä¹¦æ²¡æœ‰æŒ‰ç…§é»˜è®¤æµç¨‹ï¼ˆå›¾ç‰‡ç¤ºä¾‹ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦ä½ å°†ä½ çš„è¯ä¹¦ç§»åŠ¨åˆ°<code>C:\\Users\\dream\\.ssh</code>ç›®å½•ï¼Œç„¶ååœ¨<code>config</code>æ–‡ä»¶æ–°å¢å¦‚ä¸‹ï¼š</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># æœåŠ¡å™¨è®¤è¯\nHost ä½ çš„æœåŠ¡ip\n    HostName ä½ çš„æœåŠ¡ip\n    IdentityFile ~\\\\.ssh\\\\ç§é’¥åç§°<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/fbdfbb86f93020ecdafaa9c8aea359b3.png\" alt=\"image-20210327103710656\" /></p>\n<blockquote>\n<p>å¦‚æœä½ æŒ‰ç…§é»˜è®¤æµç¨‹äº†ï¼Œé‚£ä¹ˆä¸éœ€è¦æ­¤æ“ä½œã€‚</p>\n</blockquote>\n<p>éƒ½é…ç½®å®Œæ¯•åè¾“å…¥<code>ssh git@æœåŠ¡å™¨ip</code>å¦‚æœèƒ½å¤Ÿå…å¯†ç™»å½•å³ä»£è¡¨æˆåŠŸäº†ï¼Œå¦‚æœä¸èƒ½è¯·ç”¨è„‘å­åœ¨ä»”ç»†çœ‹ä¸€éè¿™ä¸€éƒ¨åˆ†çš„æ•™ç¨‹ã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/1e51ea1f28dddc4157fc362213841d83.png\" alt=\"image-20210327103901579\" /></p>\n</li>\n</ol>\n<h2 id=\"ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™\"><a class=\"markdownIt-Anchor\" href=\"#ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™\"></a> ç¦ç”¨gitç”¨æˆ·çš„shellæƒé™</h2>\n<p>æˆ‘æµ‹è¯•å®‰è£…å®Œåè‡ªå¸¦äº†<code>git-shell</code>ï¼Œé€šè¿‡<code>which git-shell</code>å‘½ä»¤æŸ¥çœ‹æ˜¯å¦èƒ½æ˜¾ç¤ºå‡ºè·¯å¾„ï¼Œå¦‚æœä¸èƒ½åˆ™éœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/4da6bec68f9a80a43f161b099ad28a0a.png\" alt=\"image-20210327104350613\" /></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// å¦‚æœä¸æ˜¯rootç”¨æˆ·è¯·åˆ‡æ¢è‡³rootç”¨æˆ·\n<span class=\"token function\">su</span> root\n// æŸ¥çœ‹ git-shell æ˜¯å¦åœ¨ç™»å½•æ–¹å¼é‡Œé¢\n<span class=\"token function\">cat</span> /etc/shells \n// æŸ¥çœ‹æ˜¯å¦å®‰è£…\n<span class=\"token function\">which</span> git-shell \n// æ·»åŠ ä¸Š2æ­¥æ˜¾ç¤ºå‡ºæ¥çš„è·¯åŠ²ï¼Œé€šå¸¸åœ¨ /usr/bin/git-shell<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä¿®æ”¹ <code>/etc/passwd</code> ä¸­çš„æƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/passwd<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// å°†åŸæ¥çš„\ngit:x:1001:1001::/home/git:/bin/bash\n\n// ä¿®æ”¹ä¸º\ngit:x:1001:1001::/home/git:/bin/git-shell<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"hexoé…ç½®\"><a class=\"markdownIt-Anchor\" href=\"#hexoé…ç½®\"></a> hexoé…ç½®</h2>\n<p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ ä¸Šä½ çš„gitï¼Œ<em>æ¯ä¸ªäººçš„é…ç½®å¯èƒ½ä¸åŒ</em>ï¼Œå›¾ç‰‡ä»…ä¾›å‚è€ƒã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/abcae5bea72fafd4ed2dad8d1ce0018c.png\" alt=\"image-20210327104911059\" /></p>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">deploy:\n  - type: baidu_url_submitter <span class=\"token comment\"># ç™¾åº¦</span>\n  - type: baidu_xz_url_submitter <span class=\"token comment\"># ç™¾åº¦ç†ŠæŒå·</span>\n  - type: <span class=\"token function\">git</span>\n    repository:\n      server: git@server_ip:/home/git/repos/hexo_blog.git\n    branch: master<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é…ç½®å®Œæˆåè¿è¡Œä¸€æ¬¡<code>hexo d</code>å‘½ä»¤ï¼Œçœ‹æ˜¯å¦èƒ½æˆåŠŸæ¨é€ã€‚ï¼ˆä½¿ç”¨æ­¤å‘½ä»¤æ¨é€éœ€è¦æœ¬åœ°id_rsaç§é’¥å¯¹ç”¨çš„å…¬é’¥åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœä½ æŒ‰ç…§æˆ‘çš„æµç¨‹é‡å‘½åäº†ï¼Œé‚£ä¹ˆä¸ä¼šæˆåŠŸçš„ï¼ï¼‰</p>\n<p>æ‰‹åŠ¨æµ‹è¯•</p>\n<ol>\n<li>\n<p>è¿›å…¥<code>public</code>ç›®å½•</p>\n</li>\n<li>\n<p>åˆå§‹åŒ–ä»“åº“</p>\n</li>\n<li>\n<p>å‘½ä»¤ä¸‰è¿</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">'update'</span>\n<span class=\"token function\">git</span> push --force --all git@server_ip:/home/git/repos/hexo_blog.git<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/411a6b4e96b3aa2732d465a661a9c56a.png\" alt=\"image-20210327105822053\" /></p>\n</li>\n<li>\n<p>æ­¤æ—¶æœåŠ¡å™¨ä¸­å·²ç»å­˜åœ¨äº†æ–‡ä»¶</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/52da95cff516898b457be1e0e654a956.png\" alt=\"image-20210327110317070\" /></p>\n</li>\n</ol>\n<div class=\"note danger flat\"><p>è™½ç„¶ç°åœ¨å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯åé¢æˆ‘ä¼šä»‹ç»é€šè¿‡æŒç»­é›†æˆå®ç°è‡ªåŠ¨åŒ–æ„å»ºå¹¶ä¸Šä¼ ã€‚é‚£æ—¶ä½ åªéœ€è¦pushä¸Šä½ çš„æºä»£ç å³å¯ã€‚</p>\n</div>\n<h2 id=\"å®‰è£…docker\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…docker\"></a> å®‰è£…Docker</h2>\n<ol>\n<li>\n<p>å®‰è£…docker</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -fsSL get.docker.com -o get-docker.sh\n<span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> get-docker.sh --mirror Aliyun<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/7eaf5c19d14602abc4f80fc5562f2c6a.jpeg\" alt=\"image-20210327095433092\" /></p>\n</li>\n<li>\n<p>å¯åŠ¨dockeræœåŠ¡</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> docker\n<span class=\"token function\">sudo</span> systemctl start docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>æ¨èæ“ä½œ</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> docker\n<span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG docker <span class=\"token environment constant\">$USER</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/9e6de78253717fd1e3cb1ab45c57018a.png\" alt=\"image-20210327095647687\" /></p>\n</li>\n<li>\n<p>ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼ˆéå¤§é™†æœºå™¨å¯å¿½ç•¥ï¼‰</p>\n<ol>\n<li>\n<p>ç™»å½•<a href=\"https://cr.console.aliyun.com/?spm=5176.12818093.custom--ali--widget-home-product-recent.dre1.1c8316d0Tujp2R\">é˜¿é‡Œå®¹å™¨é•œåƒæœåŠ¡</a></p>\n</li>\n<li>\n<p>æŸ¥çœ‹åŠ é€Ÿåœ°å€</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/2/27/4ee8ed340343e6d5b82db27657dfd308.png\" alt=\"image-20210227190110321\" /></p>\n</li>\n<li>\n<p>è®¾ç½®åŠ é€ŸæœåŠ¡</p>\n<ul>\n<li>\n<p>åˆ›å»ºç›®å½•</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p /etc/docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>\n<p>åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/docker/daemon.json <span class=\"token operator\">&lt;&lt;-</span><span class=\"token string\">'EOF'\n&#123;\n  \"registry-mirrors\": [\"https://lz2nib3q.mirror.aliyuncs.com\"]\n&#125;\nEOF</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>é‡æ–°åŠ è½½åŠé‡å¯DockeræœåŠ¡</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl daemon-reload\n<span class=\"token function\">sudo</span> systemctl restart docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>æŸ¥çœ‹é•œåƒåœ°å€</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">dokcer info<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/81643eaef96277bc6dd3c7a8e30d8759.png\" alt=\"image-20210327100102166\" /></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"å®‰è£…docker-compose\"><a class=\"markdownIt-Anchor\" href=\"#å®‰è£…docker-compose\"></a> å®‰è£…docker-compose</h2>\n<p>ç”±äºå›½å†…æœºå™¨ç›´æ¥ä¸‹è½½GitHubçš„èµ„æºé€Ÿåº¦å¾ˆæ…¢ã€‚å› æ­¤ä½¿ç”¨æ‰‹åŠ¨ä¸‹è½½çš„æ–¹å¼ã€‚</p>\n<ol>\n<li>\n<p>è¿›å…¥<a href=\"https://github.com/docker/compose/releases\">GitHub</a>è¿›è¡Œä¸‹è½½<code>docker-compose-Linux-x86_64</code></p>\n</li>\n<li>\n<p>å°†æ–‡ä»¶ä¸Šä¼ åˆ° <code>/usr/local/bin/</code> ç›®å½•ï¼Œå¹¶æ”¹åä¸º <code>docker-compose</code></p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/b55191d7d90e5a3f66595e86223a30e2.png\" alt=\"image-20210327100914341\" /></p>\n</li>\n<li>\n<p>èµ‹äºˆæƒé™</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>\n<p>æµ‹è¯•</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">docker-compose -v<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/0d3b13695dc9c3c9fcb638836236a837.png\" alt=\"image-20210327100958402\" /></p>\n</li>\n</ol>\n<h2 id=\"é…ç½®nginx\"><a class=\"markdownIt-Anchor\" href=\"#é…ç½®nginx\"></a> é…ç½®nginx</h2>\n<p>æ—¢ç„¶æˆ‘ä»¬å®‰è£…äº†dockerï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é…ç½®å°†ä¼šå¾ˆç®€å•ã€‚</p>\n<ol>\n<li>\n<p>ä¸‹è½½<a href=\"https://tzk.lanzous.com/b06mr4hfc\">è“å¥äº‘</a>æ–‡ä»¶ï¼Œå¯†ç ï¼ˆak1mï¼‰</p>\n</li>\n<li>\n<p>å°†æ–‡ä»¶è§£å‹ï¼Œå¹¶æŒ‰ç…§ä½ è‡ªå·±çš„ä¿¡æ¯è¿›è¡Œç¼–è¾‘</p>\n<ul>\n<li>\n<p>sslç›®å½•</p>\n<p>å­˜æ”¾ä½ çš„ç½‘ç«™è¯ä¹¦ï¼Œå¯ä»¥åˆ°è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€freesslç­‰å¹³å°è¿›è¡Œç”³è¯·ã€‚</p>\n</li>\n<li>\n<p>nginxç›®å½•</p>\n<p>æ­¤ç›®å½•å­˜åœ¨nginxçš„ç›¸å…³é…ç½®ï¼Œè¯·æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ç›¸å…³é…ç½®</p>\n</li>\n</ul>\n</li>\n<li>\n<p>æœåŠ¡å™¨ä¸Šä¼ è¿™äº›æ–‡ä»¶ï¼ˆä¸æ˜¯å‹ç¼©åŒ…ï¼‰</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~\n<span class=\"token function\">mkdir</span> blog<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/58d4ac2252bf2890ec848e045e086bd7.png\" alt=\"image-20210327113346229\" /></p>\n</li>\n<li>\n<p>è¿è¡Œ<code>docker-compose up -d</code>å‘½ä»¤å¯åŠ¨æœåŠ¡ã€‚ç„¶åä½¿ç”¨<code>docker-compose ps</code>å‘½ä»¤æŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚</p>\n<p><img src=\"https://file.acs.pw/picGo/2021/3/27/23cb64080f8891b59c570d455be9ade2.png\" alt=\"image-20210327113622914\" /></p>\n</li>\n<li>\n<p>dnsè§£æã€‚</p>\n<p><img src=\"https://file.acs.pw/pigGo/2021/03/27/20210327114033.png\" alt=\"image-20210327113645222\" /></p>\n</li>\n</ol>\n<h2 id=\"é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²\"></a> é€šè¿‡codingè‡ªåŠ¨éƒ¨ç½²</h2>\n<p>é€šè¿‡codingéƒ¨ç½²éœ€è¦å°†æˆ‘ä»¬çš„ç§é’¥æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œï¼Œä½†æ˜¯codingçš„ç¯å¢ƒå˜é‡ä¸ä¼šè‡ªåŠ¨è§£ææ¢è¡Œç¬¦ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è§£æä¸€ä¸‹ï¼ˆä¹Ÿå°±æ˜¯å°†æ¢è¡Œå˜æˆ<code>\\n</code>ï¼‰ã€‚ç„¶åå°†å…¶å¡«å…¥codingçš„ç¯å¢ƒå˜é‡ã€‚</p>\n<p>ç®€é™‹çš„åœ¨çº¿è½¬æ¢åœ°å€ï¼š<a href=\"https://kkfive.gitee.io/tools/\">gitee Pages</a></p>\n<p><img src=\"https://file.acs.pw/pigGo/2021/03/27/20210327145311.png\" alt=\"image-20210327145311021\" /></p>\n<p>åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤ä¹‹å‰æ·»åŠ å¦‚ä¸‹å‘½ä»¤å³å¯ã€‚</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p ~/.ssh/\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$&#123;HEXO_DEPLOY_PRIVATE_KEY&#125;</span>\"</span> <span class=\"token operator\">></span> ~/.ssh/id_rsa \n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> ~/.ssh/id_rsa\n<span class=\"token function\">cat</span> ~/.ssh/id_rsa\nssh-keyscan ä½ çš„æœåŠ¡å™¨ipåœ°å€ <span class=\"token operator\">>></span> ~/.ssh/known_hosts<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"é€šè¿‡github-actionsè‡ªåŠ¨éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#é€šè¿‡github-actionsè‡ªåŠ¨éƒ¨ç½²\"></a> é€šè¿‡GitHub Actionsè‡ªåŠ¨éƒ¨ç½²</h2>\n<p>GitHubçš„å¯†é’¥æ”¯æŒæ¢è¡Œç¬¦ï¼Œä¸éœ€è¦è¿›è¡Œè½¬åŒ–ï¼Œç›´æ¥ç²˜è´´å³å¯ã€‚æ–°åŠ ä¸€ä¸ªåç§°ä¸º <code>HEXO_DEPLOY_PRIVATE_KEY</code>çš„<code>Secrets</code></p>\n<p>åœ¨è¿›è¡Œä¸Šä¼ æ“ä½œæ—¶æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Deploy Private Key\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">HEXO_DEPLOY_PRIVATE_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#123;</span> secrets.HEXO_DEPLOY_PRIVATE_KEY <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span>\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    mkdir -p ~/.ssh/\n    echo \"$HEXO_DEPLOY_PRIVATE_KEY\" > ~/.ssh/id_rsa \n    chmod 600 ~/.ssh/id_rsa\n    ssh-keyscan æœåŠ¡å™¨ip >> ~/.ssh/known_hosts</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":[{"name":"Hexo","path":"api/categories/Hexo.json"},{"name":"ä¼˜é›…éƒ¨ç½²","path":"api/categories/ä¼˜é›…éƒ¨ç½².json"}],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"},{"name":"é…ç½®ç¯å¢ƒ","path":"api/tags/é…ç½®ç¯å¢ƒ.json"}]}